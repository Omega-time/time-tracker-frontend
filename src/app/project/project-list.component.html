<div class="bs-docs-select">
    <div class="col-lg-11">
        <div class="col-lg-offset-1 col-lg-11">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <a data-toggle="collapse" href="javascript:void(0)" (click)="collapse()" class="aclass">
                        <h4>
                            <strong>Създаване на нов проект</strong>
                            <span class="badge" data-toggle="tooltip" data-placement="top" title="Името на проекта трябва да е с дължина между 2 и 90 символа.">?</span>
                        </h4>
                    </a>
                </div>
                <project-form *ngIf="!collapsed" (newProjectAdded)="getAllProjects()"></project-form>

            </div>
        </div>
    </div>
    <div class="col-lg-offset-1 col-lg-11" *ngIf="loadingProjects">
        <h4>Зареждане на проектите...</h4>
    </div>
    <div *ngIf="!loadingProjects">
        <div class="col-lg-11" *ngIf="!noProjects">
            <div class="col-lg-offset-1 col-lg-11">
                <div class="panel panel-primary">

                    <div class="panel-heading">
                        <h4>
                            <strong>Мои проекти</strong>
                        </h4>
                    </div>
                    <accordion>
                        <accordion-group [heading]="project.name" *ngFor="let project of projects">
                            <span>Дата на създаване: <em>{{project?.dateOfCreation | date:"dd/MM/yy hh:mm"}}</em>
                        <span class="col-lg-offset-1">Последна промяна: <em>{{project?.dateLastChanged | date:"dd/MM/yy hh:mm"}}</em></span>
                            <p>
                                Последна дейност: <em>{{project?.lastTaskName}}</em> </span>
                                
                                <span>Клиенти:</span>
                                    <span *ngFor="let client of project.clients" ><em>{{client?.email}} </em></span>
                                    <project-button [project]="project"></project-button>
                        </accordion-group>
                    </accordion>
                </div>
            </div>
        </div>
        <div class="col-lg-11" *ngIf="!noClientProjects">
            <div class="col-lg-offset-1 col-lg-11">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h4>
                            <strong>Клиентски проекти</strong>
                        </h4>
                    </div>
                    <accordion>
                        <accordion-group [heading]="project.name" *ngFor="let project of clientProjects">
                            <span>Дата на създаване: <em>{{project?.dateOfCreation | date:"dd/MM/yy hh:mm"}}</em>
                        <span class="col-lg-offset-1">Последна промяна: <em>{{project?.dateLastChanged | date:"dd/MM/yy hh:mm"}}</em></span>
                            <p>
                                Последна дейност: <em>{{project?.lastTaskName}}</em> </span>

                                <project-button [project]="project" [client]="true"></project-button>
                        </accordion-group>
                    </accordion>
                </div>
            </div>
        </div>
    </div>
</div>